{"version":3,"sources":["../src/app.ts"],"sourcesContent":["import express, { Router } from \"express\"\r\nimport * as dotevnv from \"dotenv\"\r\nimport cors from \"cors\"\r\nimport helmet from \"helmet\"\r\nimport ApiRoute from \"./routes/api.route\"\r\nimport { Routes } from \"./interfaces/routes.interface\"\r\n\r\ndotevnv.config()\r\n\r\nif (!process.env.PORT) {\r\n    console.log(`No port value specified...`)\r\n}\r\n\r\n\r\nclass App {\r\n    public app: express.Application;\r\n    public port: string | number;\r\n    public router = Router();\r\n    constructor(routes: Routes[]) {\r\n        this.port = parseInt(process.env.PORT as string) || 7000;\r\n        let app = express();\r\n        this.app = app;\r\n        this.initMiddleware();\r\n        this.initRoutes(routes);\r\n    }\r\n\r\n    initMiddleware() {\r\n        this.app.use(express.json())\r\n        this.app.use(express.urlencoded({ extended: true }))\r\n        this.app.use(cors())\r\n        this.app.use(helmet())\r\n    }\r\n\r\n    initRoutes(routes: Routes[]) {\r\n        this.app.get(\"/debug-sentry\", function mainHandler(req, res) {\r\n            throw new Error(\"My first Sentry error!\");\r\n        });\r\n        // this.app.use(`/api/book/store`, function mainHandler(req, res) {\r\n        //     throw new Error(\"My first Sentry error!\");\r\n        // });\r\n        routes.forEach(route => {\r\n            this.app.use('/', route.router);\r\n        });\r\n    }\r\n\r\n    listen() {\r\n        this.app.listen(this.port, () => {\r\n            console.log(`Server is listening on port ${this.port}`)\r\n        })\r\n    }\r\n}\r\n\r\n\r\nconst app = new App([\r\n    new ApiRoute()\r\n])\r\n\r\napp.listen();"],"names":["dotevnv","config","process","env","PORT","console","log","App","initMiddleware","app","use","express","json","urlencoded","extended","cors","helmet","initRoutes","routes","get","mainHandler","req","res","Error","forEach","route","router","listen","port","constructor","Router","parseInt","ApiRoute"],"mappings":";;;;iEAAgC;gEACP;6DACR;+DACE;iEACE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGrBA,QAAQC,MAAM;AAEd,IAAI,CAACC,QAAQC,GAAG,CAACC,IAAI,EAAE;IACnBC,QAAQC,GAAG,CAAC,CAAC,0BAA0B,CAAC;AAC5C;AAGA,IAAA,AAAMC,MAAN,MAAMA;IAYFC,iBAAiB;QACb,IAAI,CAACC,GAAG,CAACC,GAAG,CAACC,gBAAO,CAACC,IAAI;QACzB,IAAI,CAACH,GAAG,CAACC,GAAG,CAACC,gBAAO,CAACE,UAAU,CAAC;YAAEC,UAAU;QAAK;QACjD,IAAI,CAACL,GAAG,CAACC,GAAG,CAACK,IAAAA,aAAI;QACjB,IAAI,CAACN,GAAG,CAACC,GAAG,CAACM,IAAAA,eAAM;IACvB;IAEAC,WAAWC,MAAgB,EAAE;QACzB,IAAI,CAACT,GAAG,CAACU,GAAG,CAAC,iBAAiB,SAASC,YAAYC,GAAG,EAAEC,GAAG;YACvD,MAAM,IAAIC,MAAM;QACpB;QACA,mEAAmE;QACnE,iDAAiD;QACjD,MAAM;QACNL,OAAOM,OAAO,CAACC,CAAAA;YACX,IAAI,CAAChB,GAAG,CAACC,GAAG,CAAC,KAAKe,MAAMC,MAAM;QAClC;IACJ;IAEAC,SAAS;QACL,IAAI,CAAClB,GAAG,CAACkB,MAAM,CAAC,IAAI,CAACC,IAAI,EAAE;YACvBvB,QAAQC,GAAG,CAAC,CAAC,4BAA4B,EAAE,IAAI,CAACsB,IAAI,CAAC,CAAC;QAC1D;IACJ;IA/BAC,YAAYX,MAAgB,CAAE;QAH9B,uBAAOT,OAAP,KAAA;QACA,uBAAOmB,QAAP,KAAA;QACA,uBAAOF,UAASI,IAAAA,eAAM;QAElB,IAAI,CAACF,IAAI,GAAGG,SAAS7B,QAAQC,GAAG,CAACC,IAAI,KAAe;QACpD,IAAIK,MAAME,IAAAA,gBAAO;QACjB,IAAI,CAACF,GAAG,GAAGA;QACX,IAAI,CAACD,cAAc;QACnB,IAAI,CAACS,UAAU,CAACC;IACpB;AA0BJ;AAGA,MAAMT,MAAM,IAAIF,IAAI;IAChB,IAAIyB,iBAAQ;CACf;AAEDvB,IAAIkB,MAAM"}